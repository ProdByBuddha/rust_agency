services:
  speaker:
    build:
      context: .
      dockerfile: Dockerfile.speaker
    container_name: agency-speaker
    ports:
      - "8001:8001"
    environment:
      - HF_TOKEN=${HF_TOKEN}
    volumes:
      # Mount the HF cache so we don't redownload models inside the container
      - ~/.cache/huggingface:/root/.cache/huggingface
    deploy:
      resources:
        limits:
          memory: 4G
    restart: unless-stopped

  jaeger:
    image: jaegertracing/all-in-one:latest
    container_name: agency-jaeger
    ports:
      - "16686:16686" # Web UI
      - "4317:4317"  # OTLP gRPC (used by collector)
    environment:
      - COLLECTOR_OTLP_ENABLED=true
    restart: unless-stopped
